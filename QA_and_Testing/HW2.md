# Домашнее задание 2
__Мухин Дмитрий БПИ228__

## Ошибка 1: Неверная инициализация переменной r
### 1. ФИО обнаружившего ошибку
Мухин Дмитрий Владимирович

### 2. Дата и время обнаружения
06.02.2025, 22:07

### 3. Краткое описание ошибки
Переменная r инициализирована значением 0, что приводит к тому, что метод pow всегда возвращает 0 при любом входном значении a и b.

### 4. Нарушаемое требование
Метод должен корректно вычислять a^b, но текущее значение r = 0 делает результат всегда равным нулю.

### 5. Описание условий возникновения ошибки
Ошибка возникает всегда, так как r умножается на a, оставаясь 0.

### 6. Код теста, демонстрирующего ошибку
```java
Power p = new Power();
System.out.println(p.pow(2, 3)); // Ожидали 8, получили 0
```

### 7. Исправление ошибки
Замена строки:

```java
int r = 0;
```

На:

```java
int r = 1;
```

## Ошибка 2: Неверное возведение r в квадрат
### 1. ФИО обнаружившего ошибку
Мухин Дмитрий Владимирович

### 2. Дата и время обнаружения
06.02.2025, 22:15

### 3. Краткое описание ошибки
Метод выполняет r *= r, хотя должен возводить в квадрат a, а не r.

### 4. Нарушаемое требование
Должен использоваться правильный алгоритм бинарного возведения в степень.
a должен возводиться в квадрат на каждом шаге, а не r.
### 5. Описание условий возникновения ошибки
Ошибка проявляется, если b > 0, так как r *= r приводит к неверному результату.

### 6. Код теста, демонстрирующего ошибку

```java
Power p = new Power();
System.out.println(p.pow(2, 3)); // Ожидали 8, получили 64
```
### 7. Исправление ошибки
Замена строки:

```java
r *= r;
```
На:

```java
a *= a;
```

## Ошибка 3: Отсутствие защиты от переполнения
### 1. ФИО обнаружившего ошибку
Мухин Дмитрий Владимирович

### 2. Дата и время обнаружения
06.02.2025, 22:30

### 3. Краткое описание ошибки
Метод не учитывает возможное переполнение при вычислении r = r * a и a = a * a, что может привести к некорректным значениям.

### 4. Нарушаемое требование
Результат должен вычисляться по модулю 2^31.
### 5. Описание условий возникновения ошибки
При больших a и b происходит переполнение, приводящее к некорректным результатам.

### 6. Код теста, демонстрирующего ошибку
```java
Power p = new Power();
System.out.println(p.pow(100000, 3)); // Ожидали положительное число, получили отрицательное
```
### 7. Исправление ошибки
Использование long и вычисление по модулю 2^31:

```java
r = (int) (((long) r * a) % (1L << 31));
a = (int) (((long) a * a) % (1L << 31));
```

## Исправленный код:
``` java
/**
 * Copyright (c) 2009 ISP RAS.
 * 109004, A. Solzhenitsina, 25, Moscow, Russia.
 * All rights reserved.
 *
 * $Id$
 * Created on Jan 15, 2016
 */

import javax.xml.transform.stream.StreamSource;

/**
 * @author Victor Kuliamin
 */
public class Power {

  public int pow(int a, int b) {
    int r = 1;
    
    while(b > 0) {
      if((b&1) != 0) r = (int) (((long) r * a) % (1L << 31));
      a = (int) (((long) a * a) % (1L << 31));
      b >>= 1;
    } 
    
    return r; 
  }
  public static void main(String[] args){//for debugging
    Power p = new Power();
    System.out.println(p.pow(100000,3));
  }
}
```
